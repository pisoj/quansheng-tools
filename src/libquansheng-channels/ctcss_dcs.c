#include "ctcss_dcs.h"
#include "internal/common.h"

#include <math.h>

qdc_Code qdc_parseCtcss(float tone) {
    if (fabs(tone - 67.0f) < qdc_EPSILON) return qdc_Code_CTCSS_67;
    else if (fabs(tone - 69.3f) < qdc_EPSILON) return qdc_Code_CTCSS_69_3;
    else if (fabs(tone - 71.9f) < qdc_EPSILON) return qdc_Code_CTCSS_71_9;
    else if (fabs(tone - 74.4f) < qdc_EPSILON) return qdc_Code_CTCSS_74_4;
    else if (fabs(tone - 77.0f) < qdc_EPSILON) return qdc_Code_CTCSS_77;
    else if (fabs(tone - 79.7f) < qdc_EPSILON) return qdc_Code_CTCSS_79_7;
    else if (fabs(tone - 82.5f) < qdc_EPSILON) return qdc_Code_CTCSS_82_5;
    else if (fabs(tone - 85.4f) < qdc_EPSILON) return qdc_Code_CTCSS_85_4;
    else if (fabs(tone - 88.5f) < qdc_EPSILON) return qdc_Code_CTCSS_88_5;
    else if (fabs(tone - 91.5f) < qdc_EPSILON) return qdc_Code_CTCSS_91_5;
    else if (fabs(tone - 94.8f) < qdc_EPSILON) return qdc_Code_CTCSS_94_8;
    else if (fabs(tone - 97.4f) < qdc_EPSILON) return qdc_Code_CTCSS_97_4;
    else if (fabs(tone - 100.0f) < qdc_EPSILON) return qdc_Code_CTCSS_100;
    else if (fabs(tone - 103.5f) < qdc_EPSILON) return qdc_Code_CTCSS_103_5;
    else if (fabs(tone - 107.2f) < qdc_EPSILON) return qdc_Code_CTCSS_107_2;
    else if (fabs(tone - 110.9f) < qdc_EPSILON) return qdc_Code_CTCSS_110_9;
    else if (fabs(tone - 114.8f) < qdc_EPSILON) return qdc_Code_CTCSS_114_8;
    else if (fabs(tone - 118.8f) < qdc_EPSILON) return qdc_Code_CTCSS_118_8;
    else if (fabs(tone - 123.0f) < qdc_EPSILON) return qdc_Code_CTCSS_123;
    else if (fabs(tone - 127.3f) < qdc_EPSILON) return qdc_Code_CTCSS_127_3;
    else if (fabs(tone - 131.8f) < qdc_EPSILON) return qdc_Code_CTCSS_131_8;
    else if (fabs(tone - 136.5f) < qdc_EPSILON) return qdc_Code_CTCSS_136_5;
    else if (fabs(tone - 141.3f) < qdc_EPSILON) return qdc_Code_CTCSS_141_3;
    else if (fabs(tone - 146.2f) < qdc_EPSILON) return qdc_Code_CTCSS_146_2;
    else if (fabs(tone - 151.4f) < qdc_EPSILON) return qdc_Code_CTCSS_151_4;
    else if (fabs(tone - 156.7f) < qdc_EPSILON) return qdc_Code_CTCSS_156_7;
    else if (fabs(tone - 159.8f) < qdc_EPSILON) return qdc_Code_CTCSS_159_8;
    else if (fabs(tone - 162.2f) < qdc_EPSILON) return qdc_Code_CTCSS_162_2;
    else if (fabs(tone - 165.5f) < qdc_EPSILON) return qdc_Code_CTCSS_165_5;
    else if (fabs(tone - 167.9f) < qdc_EPSILON) return qdc_Code_CTCSS_167_9;
    else if (fabs(tone - 171.3f) < qdc_EPSILON) return qdc_Code_CTCSS_171_3;
    else if (fabs(tone - 173.8f) < qdc_EPSILON) return qdc_Code_CTCSS_173_8;
    else if (fabs(tone - 177.3f) < qdc_EPSILON) return qdc_Code_CTCSS_177_3;
    else if (fabs(tone - 179.9f) < qdc_EPSILON) return qdc_Code_CTCSS_179_9;
    else if (fabs(tone - 183.5f) < qdc_EPSILON) return qdc_Code_CTCSS_183_5;
    else if (fabs(tone - 186.2f) < qdc_EPSILON) return qdc_Code_CTCSS_186_2;
    else if (fabs(tone - 189.9f) < qdc_EPSILON) return qdc_Code_CTCSS_189_9;
    else if (fabs(tone - 192.8f) < qdc_EPSILON) return qdc_Code_CTCSS_192_8;
    else if (fabs(tone - 196.6f) < qdc_EPSILON) return qdc_Code_CTCSS_196_6;
    else if (fabs(tone - 199.5f) < qdc_EPSILON) return qdc_Code_CTCSS_199_5;
    else if (fabs(tone - 203.5f) < qdc_EPSILON) return qdc_Code_CTCSS_203_5;
    else if (fabs(tone - 206.5f) < qdc_EPSILON) return qdc_Code_CTCSS_206_5;
    else if (fabs(tone - 210.7f) < qdc_EPSILON) return qdc_Code_CTCSS_210_7;
    else if (fabs(tone - 218.1f) < qdc_EPSILON) return qdc_Code_CTCSS_218_1;
    else if (fabs(tone - 225.7f) < qdc_EPSILON) return qdc_Code_CTCSS_225_7;
    else if (fabs(tone - 229.1f) < qdc_EPSILON) return qdc_Code_CTCSS_229_1;
    else if (fabs(tone - 233.6f) < qdc_EPSILON) return qdc_Code_CTCSS_233_6;
    else if (fabs(tone - 241.8f) < qdc_EPSILON) return qdc_Code_CTCSS_241_8;
    else if (fabs(tone - 250.3f) < qdc_EPSILON) return qdc_Code_CTCSS_250_3;
    else if (fabs(tone - 254.1f) < qdc_EPSILON) return qdc_Code_CTCSS_254_1;
    return qdc_Code_NONE;
}

unsigned int qdc_parseDcsWithoutType(unsigned int code) {
    switch (code) {
        case 23: return _qdc_Code_NOTYPE_DCS_23;
        case 25: return _qdc_Code_NOTYPE_DCS_25;
        case 26: return _qdc_Code_NOTYPE_DCS_26;
        case 31: return _qdc_Code_NOTYPE_DCS_31;
        case 32: return _qdc_Code_NOTYPE_DCS_32;
        case 36: return _qdc_Code_NOTYPE_DCS_36;
        case 43: return _qdc_Code_NOTYPE_DCS_43;
        case 47: return _qdc_Code_NOTYPE_DCS_47;
        case 51: return _qdc_Code_NOTYPE_DCS_51;
        case 53: return _qdc_Code_NOTYPE_DCS_53;
        case 54: return _qdc_Code_NOTYPE_DCS_54;
        case 65: return _qdc_Code_NOTYPE_DCS_65;
        case 71: return _qdc_Code_NOTYPE_DCS_71;
        case 72: return _qdc_Code_NOTYPE_DCS_72;
        case 73: return _qdc_Code_NOTYPE_DCS_73;
        case 74: return _qdc_Code_NOTYPE_DCS_74;
        case 114: return _qdc_Code_NOTYPE_DCS_114;
        case 115: return _qdc_Code_NOTYPE_DCS_115;
        case 116: return _qdc_Code_NOTYPE_DCS_116;
        case 122: return _qdc_Code_NOTYPE_DCS_122;
        case 125: return _qdc_Code_NOTYPE_DCS_125;
        case 131: return _qdc_Code_NOTYPE_DCS_131;
        case 132: return _qdc_Code_NOTYPE_DCS_132;
        case 134: return _qdc_Code_NOTYPE_DCS_134;
        case 143: return _qdc_Code_NOTYPE_DCS_143;
        case 145: return _qdc_Code_NOTYPE_DCS_145;
        case 152: return _qdc_Code_NOTYPE_DCS_152;
        case 155: return _qdc_Code_NOTYPE_DCS_155;
        case 156: return _qdc_Code_NOTYPE_DCS_156;
        case 162: return _qdc_Code_NOTYPE_DCS_162;
        case 165: return _qdc_Code_NOTYPE_DCS_165;
        case 172: return _qdc_Code_NOTYPE_DCS_172;
        case 174: return _qdc_Code_NOTYPE_DCS_174;
        case 205: return _qdc_Code_NOTYPE_DCS_205;
        case 212: return _qdc_Code_NOTYPE_DCS_212;
        case 223: return _qdc_Code_NOTYPE_DCS_223;
        case 225: return _qdc_Code_NOTYPE_DCS_225;
        case 226: return _qdc_Code_NOTYPE_DCS_226;
        case 243: return _qdc_Code_NOTYPE_DCS_243;
        case 244: return _qdc_Code_NOTYPE_DCS_244;
        case 245: return _qdc_Code_NOTYPE_DCS_245;
        case 246: return _qdc_Code_NOTYPE_DCS_246;
        case 251: return _qdc_Code_NOTYPE_DCS_251;
        case 252: return _qdc_Code_NOTYPE_DCS_252;
        case 255: return _qdc_Code_NOTYPE_DCS_255;
        case 261: return _qdc_Code_NOTYPE_DCS_261;
        case 263: return _qdc_Code_NOTYPE_DCS_263;
        case 265: return _qdc_Code_NOTYPE_DCS_265;
        case 266: return _qdc_Code_NOTYPE_DCS_266;
        case 271: return _qdc_Code_NOTYPE_DCS_271;
        case 274: return _qdc_Code_NOTYPE_DCS_274;
        case 306: return _qdc_Code_NOTYPE_DCS_306;
        case 311: return _qdc_Code_NOTYPE_DCS_311;
        case 315: return _qdc_Code_NOTYPE_DCS_315;
        case 325: return _qdc_Code_NOTYPE_DCS_325;
        case 331: return _qdc_Code_NOTYPE_DCS_331;
        case 332: return _qdc_Code_NOTYPE_DCS_332;
        case 343: return _qdc_Code_NOTYPE_DCS_343;
        case 346: return _qdc_Code_NOTYPE_DCS_346;
        case 351: return _qdc_Code_NOTYPE_DCS_351;
        case 356: return _qdc_Code_NOTYPE_DCS_356;
        case 364: return _qdc_Code_NOTYPE_DCS_364;
        case 365: return _qdc_Code_NOTYPE_DCS_365;
        case 371: return _qdc_Code_NOTYPE_DCS_371;
        case 411: return _qdc_Code_NOTYPE_DCS_411;
        case 412: return _qdc_Code_NOTYPE_DCS_412;
        case 413: return _qdc_Code_NOTYPE_DCS_413;
        case 423: return _qdc_Code_NOTYPE_DCS_423;
        case 431: return _qdc_Code_NOTYPE_DCS_431;
        case 432: return _qdc_Code_NOTYPE_DCS_432;
        case 445: return _qdc_Code_NOTYPE_DCS_445;
        case 446: return _qdc_Code_NOTYPE_DCS_446;
        case 452: return _qdc_Code_NOTYPE_DCS_452;
        case 454: return _qdc_Code_NOTYPE_DCS_454;
        case 455: return _qdc_Code_NOTYPE_DCS_455;
        case 462: return _qdc_Code_NOTYPE_DCS_462;
        case 464: return _qdc_Code_NOTYPE_DCS_464;
        case 465: return _qdc_Code_NOTYPE_DCS_465;
        case 466: return _qdc_Code_NOTYPE_DCS_466;
        case 503: return _qdc_Code_NOTYPE_DCS_503;
        case 506: return _qdc_Code_NOTYPE_DCS_506;
        case 516: return _qdc_Code_NOTYPE_DCS_516;
        case 523: return _qdc_Code_NOTYPE_DCS_523;
        case 526: return _qdc_Code_NOTYPE_DCS_526;
        case 532: return _qdc_Code_NOTYPE_DCS_532;
        case 546: return _qdc_Code_NOTYPE_DCS_546;
        case 565: return _qdc_Code_NOTYPE_DCS_565;
        case 606: return _qdc_Code_NOTYPE_DCS_606;
        case 612: return _qdc_Code_NOTYPE_DCS_612;
        case 624: return _qdc_Code_NOTYPE_DCS_624;
        case 627: return _qdc_Code_NOTYPE_DCS_627;
        case 631: return _qdc_Code_NOTYPE_DCS_631;
        case 632: return _qdc_Code_NOTYPE_DCS_632;
        case 654: return _qdc_Code_NOTYPE_DCS_654;
        case 662: return _qdc_Code_NOTYPE_DCS_662;
        case 664: return _qdc_Code_NOTYPE_DCS_664;
        case 703: return _qdc_Code_NOTYPE_DCS_703;
        case 712: return _qdc_Code_NOTYPE_DCS_712;
        case 723: return _qdc_Code_NOTYPE_DCS_723;
        case 731: return _qdc_Code_NOTYPE_DCS_731;
        case 732: return _qdc_Code_NOTYPE_DCS_732;
        case 734: return _qdc_Code_NOTYPE_DCS_734;
        case 743: return _qdc_Code_NOTYPE_DCS_743;
        case 754: return _qdc_Code_NOTYPE_DCS_754;
        default: return qdc_Code_NONE;
    }
}

qdc_Code qdc_parseDcs(unsigned int code, _Bool isInverted) {
    return isInverted ? _qdc_Code_TYPE_DCS_INVERTED : _qdc_Code_TYPE_DCS | qdc_parseDcsWithoutType(code);
}
